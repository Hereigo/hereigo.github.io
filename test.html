<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            #myDiv {
                border: solid 1px red;
                padding: 1em;
                margin: 1em 0;
            }

            .parentNode {
                border: solid 1px blueviolet;
                padding: 1em;
                margin: 1em 0;
            }

        </style>
    </head>

    <body>
        <div>
            <input id="myInp" type="text" value="Asdfgh76544er" />
            <input id="myBtn" type="button" value="Button" />
            <div id="myDiv"></div>
        </div>


        <div id="Target" class="parentNode">
            <p class="parentNode">
                <input id="childNodeInput" type="text">
            </p>
        </div>

        <script>

            var theChildClick = function (event) {
                console.log(event.target.parentNode.parentNode.id);
                // Target will removed with ALL Childs!
                event.target.parentNode.parentNode.remove();
            }

            document.querySelector('#childNodeInput').addEventListener('click', theChildClick);



            var logicController = (function () {
                // Constructor:
                var myObj = function (name) {
                    this.name = name;
                    this.time = (new Date()).toLocaleTimeString();
                }
                return {
                    generateMyObj: function (dd) {
                        return new myObj(dd);
                    }
                }
            })();
            var uiController = (function () {
                var DOMnames = {
                    myButton: '#myBtn',
                    myInput: '#myInp',
                    myDiv: '#myDiv'
                }
                return {
                    insertToMyDiv: function (myObj) {
                        var mySrc, htmlTempl, finalHtml;
                        htmlTempl = '<div class="c1 c2"><b>%NAME%</b> - %TIME%.</div> <hr/>';
                        finalHtml = htmlTempl.replace('%NAME%', myObj.name).replace('%TIME%', myObj.time);
                        mySrc = document.querySelector(DOMnames.myDiv);
                        mySrc.insertAdjacentHTML('beforeend', finalHtml);
                    },
                    getDOMnames: function () {
                        return DOMnames;
                    },
                    getInputValue: function () {
                        return {
                            inpData: document.querySelector(DOMnames.myInput).value
                        }
                    }
                }
            })();
            var controller = (function (logic, ui) {
                // Private members:
                var internalStore = {
                    rec1: [],
                    rec2: []
                };
                var insertGeneratedData = function () {
                    var inputData = ui.getInputValue();
                    var newData = logic.generateMyObj(inputData.inpData);
                    ui.insertToMyDiv(newData);
                    // additional save:
                    internalStore['rec1'].push(newData.name);
                    console.log(internalStore['rec1']);
                };
                var processInputs = function () {
                    var fields, fieldsArr;
                    fields = document.querySelectorAll('.c1, c2');
                    // fields.slice(); - TypeError: slice is not a on! so:
                    fieldsArr = Array.prototype.slice.call(fields);
                    fieldsArr.forEach(function (curr, ind, arr) {
                        console.log(curr.innerText);
                    });
                }
                var setEventListeners = function () {
                    var DOM = ui.getDOMnames();
                    document.querySelector(DOM.myButton).addEventListener('click', processInputs);
                    document.addEventListener('keypress', function (event) {
                        // ENTER is pressed.
                        if (event.keyCode === 13 || event.witch === 13) {
                            insertGeneratedData();
                            // Switch Focus todesired input.
                            document.querySelector(DOM.myInput).focus();
                        }
                    });
                }
                // Public members:
                return {
                    init: function () {
                        setEventListeners();
                    }
                }
            })(logicController, uiController);
            controller.init();

        </script>
    </body>

</html>
